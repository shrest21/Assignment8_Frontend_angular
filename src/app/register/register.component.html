<div class="register-container">
  <div class="register-card">
    <div class="register-header">
      <div class="header-icon">
        <svg class="user-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
        </svg>
      </div>
      <h1>Create Account</h1>
      <p>Sign up to book your flights</p>
    </div>

    @if (isSuccessful) {
    <div class="success-container">
      <div class="success-icon">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
        </svg>
      </div>
      <h2>Registration Successful!</h2>
      <p>Your account has been created successfully. You can now log in to start booking flights.</p>
      <a routerLink="/login" class="login-link">
        Go to Login
        <svg class="arrow-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"/>
        </svg>
      </a>
    </div>
    }

    @if (!isSuccessful) {
    <form name="form" (ngSubmit)="f.form.valid && onSubmit()" #f="ngForm" novalidate class="register-form">
      
      <div class="form-group">
        <label for="username">
          <svg class="input-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
          </svg>
          Username
        </label>
        <input
          type="text"
          class="form-input"
          name="username"
          placeholder="Enter your username"
          [(ngModel)]="form.username"
          required
          minlength="3"
          maxlength="20"
          #username="ngModel"
          [ngClass]="{ 'input-error': f.submitted && username.errors }"
        />
        @if (username.errors && f.submitted) {
        <div class="error-message">
          @if (username.errors['required']) {
          <span>Username is required</span>
          }
          @if (username.errors['minlength']) {
          <span>Username must be at least 3 characters</span>
          }
          @if (username.errors['maxlength']) {
          <span>Username must be at most 20 characters</span>
          }
        </div>
        }
      </div>

      <div class="form-group">
        <label for="email">
          <svg class="input-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
          </svg>
          Email
        </label>
        <input
          type="email"
          class="form-input"
          name="email"
          placeholder="Enter your email"
          [(ngModel)]="form.email"
          required
          email
          #email="ngModel"
          [ngClass]="{ 'input-error': f.submitted && email.errors }"
        />
        @if (email.errors && f.submitted) {
        <div class="error-message">
          @if (email.errors['required']) {
          <span>Email is required</span>
          }
          @if (email.errors['email']) {
          <span>Please enter a valid email address</span>
          }
        </div>
        }
      </div>

      <div class="form-group">
        <label for="password">
          <svg class="input-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
          </svg>
          Password
        </label>
        <input
          type="password"
          class="form-input"
          name="password"
          placeholder="Enter your password"
          [(ngModel)]="form.password"
          required
          minlength="6"
          #password="ngModel"
          [ngClass]="{ 'input-error': f.submitted && password.errors }"
        />
        @if (password.errors && f.submitted) {
        <div class="error-message">
          @if (password.errors['required']) {
          <span>Password is required</span>
          }
          @if (password.errors['minlength']) {
          <span>Password must be at least 6 characters</span>
          }
        </div>
        }
      </div>

      @if (f.submitted && isSignUpFailed) {
      <div class="alert-error">
        <svg class="alert-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
        </svg>
        <div>
          <strong>Signup failed!</strong>
          <p>{{ errorMessage }}</p>
        </div>
      </div>
      }


      <button type="submit" class="submit-button">
        <span>Create Account</span>
        <svg class="button-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"/>
        </svg>
      </button>


      <div class="footer-text">
        Already have an account? 
        <a routerLink="/login" class="link">Sign in here</a>
      </div>
    </form>
    }
  </div>
</div>